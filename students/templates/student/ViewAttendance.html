
<!DOCTYPE html>
<html >
<head>
   
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" type="text/css" rel="stylesheet" />
    <title>Attendance Register</title>
    <style type="text/css">
		@import url('https://fonts.googleapis.com/css?family=Open+Sans');
    	body
    	{
    		background-color:#EEE;
    		height: 100vh;
		    font-family: 'Open Sans';
		    font-size:2vh;
		    overflow-x:hidden;
		    color:#555;
    	}
    	p
    	{
    		font-family: 'Open Sans';
		    font-size:3vh;
		    overflow-x:hidden;
		    color:#555;

    	}
    	.info-box
    	{
    		background-color:#DDD;
    		height: :30vh;
    	}
	   .panel-head {
    background-color: #00A5F2;
    color: #fff;
    margin-left: -3%;
    width: 106%;
		   padding: 10px 10px;}
    </style>
</head>
<body>


	<div id="absent-days" class="modal fade" role="dialog">
  		<div class="modal-dialog">
    		<div class="modal-content">
      			<div class="modal-header">
        			<button type="button" class="close" data-dismiss="modal">&times;</button>
   				 	<h4 class="modal-title">Absent Days</h4>
 			 	</div>
      			<div class="modal-body">
    				<ul id="modal-content">
                        
    				</ul>
     			</div>
  				<div class="modal-footer">
        			<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      			</div>
			 </div>

  		</div>
	</div>
       
	<div class="row">
		<div class="col-md-12 ">
			<h1>Attendace Register</h1>
			
		 	<!--<div class="row">
			 	<div class="form-group col-md-2">
					<label for="sel1">Course</label>
		  			<select class="form-control" id="sel1" onchange="getData()">
                        <option value="default">Select a course</option>
                          {% for i in CourseAttendanceContext %}
                      <option value="{{i.course.Course_ID.Course_Name}}">{{i.course.Course_ID.Course_Name}}</option>
                          {% endfor %}
					 </select>
				</div>

			</div>
			<div class="panel-head"> Attendance </div>
			<div class="info-box col-md-4" style="height:50vh; width:70%">

			</div>-->

			
	

			<div class="info-box col-md-4" style="width:100vh;height:60vh; position: absolute;left:450px;top:200px;margin:0px auto" >


				<br />

				<table class="table table-striped table-hover">
					 <tr>
						 <th>Course</th>
                   		 <th>Number of Classes</th>
						 <th>Present</th>
                    	 <th>Absent</th>
						 <th>Percentage</th>
						 <th>Absent Days</th>
                	</tr>
					{% for ids,i in enumerate(CourseAttendanceContext) %}
						<tr>

							<td>{{ i.course.Course_ID.Course_Name }}</td>
							<td>{{i.total}}</td>
							<td>{{i.present}}</td>

                            <td id="absent"></td>
                            <td id="percent"></td>
                            <td><button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#absent-days">Absent days</button></td>
							<script>
								var total="{{i.total}}";
								var present="{{i.present}}";
                                var absentDay=[];
                                var temp=0;
								{% for k in i.absentDays %}
            						absentDay[temp].push("{{k}}");
            					{% endfor %}
                                
                                
								var absent=(parseInt(total)-parseInt(present));
								var percent=(parseInt(present)/parseInt(total));
								document.getElementById("absent").innerHTML = absent;
								document.getElementById("percent").innerHTML = percent;
								document.getElementById("modal-content").innerHTML=createModal();
								function createModal(){
                					var text = "";
                					for (j = 0; j < absentDay[temp].length;j++) {
                   						 text +="<li>"+absentDay[temp][j]+"</li>"+"<br>";
               						 }
               						 return text;
           						 }
                                 temp=temp+1;
							</script>
							
						</tr>
					{% endfor %}
					</table>
			</div>
		</div>
        
	<script
              src="https://code.jquery.com/jquery-3.2.1.js"
              integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
              crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>